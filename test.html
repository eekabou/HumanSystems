<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이미지 설명 추가</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: #1a1a1a;
            color: #fff;
            text-align: center;
            padding-top: 50px;
            margin: 0;
            overflow: hidden;
        }

        h1 {
            color: #eee;
        }

        .scene {
            width: 700px;
            height: 700px;
            cursor: grab;
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translate(-50%, 100%); /* 두번째 값을 변경하면 원의 중심이 움직임, 클수록 내려감*/
        }
        
        .scene:active {
            cursor: grabbing;
        }

        .image-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: 50% 50%;
        }
        
        .image-item {
            position: absolute;
            width: 150px;
            height: 120px;
            border: 2px solid #0af;
            box-shadow: 0 0 10px rgba(0, 170, 255, 0.7);
            overflow: hidden;
            background-color: #222;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            user-select: none;
            -webkit-user-drag: none;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .image-item:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(0, 170, 255, 1);
        }

        /* ▼▼▼ 추가 사항 1. 설명 텍스트 스타일 ▼▼▼ */
        .description {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 4px 0;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            font-size: 13px;
            text-align: center;
            
            /* 평소에는 숨김 */
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        /* 마우스를 올렸을 때 설명 텍스트 표시 */
        .image-item:hover .description {
            opacity: 1;
        }

        #lightbox {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.85); display: flex;
            justify-content: center; align-items: center; z-index: 1000;
            opacity: 1; transition: opacity 0.4s ease; cursor: pointer;
        }

        #lightbox.hidden { opacity: 0; pointer-events: none; }
        
        #lightbox-image {
            max-width: 85vw; max-height: 85vh;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.9); cursor: default; 
        }
    </style>
</head>
<body>

    <h1>클릭 & 드래그로 회전</h1>
    <p>이미지에 마우스를 올리면 설명이 나타납니다.</p>

    <div class="scene">
        <div class="image-container">
            </div>
    </div>
    
    <div id="lightbox" class="hidden">
        <img id="lightbox-image" src="" alt="Zoomed Image">
    </div>

    <script>
        const scene = document.querySelector('.scene');
        const imageContainer = document.querySelector('.image-container');
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightbox-image');
        
        const imageUrls = [
            "https://picsum.photos/id/101/800/600", "https://picsum.photos/id/102/800/600",
            "https://picsum.photos/id/103/800/600", "https://picsum.photos/id/104/800/600",
            "https://picsum.photos/id/105/800/600", "https://picsum.photos/id/106/800/600",
            "https://picsum.photos/id/107/800/600", "https://picsum.photos/id/108/800/600",
            "https://picsum.photos/id/109/800/600", "https://picsum.photos/id/110/800/600",
            "https://picsum.photos/id/111/800/600", "https://picsum.photos/id/112/800/600",
            "https://picsum.photos/id/113/800/600", "https://picsum.photos/id/114/800/600",
            "https://picsum.photos/id/115/800/600", "https://picsum.photos/id/116/800/600"
        ];
        
        // ▼▼▼ 추가 사항 3. 설명 텍스트 배열 ▼▼▼
        const descriptions = [
            "첫 번째 풍경", "두 번째 건축물", "세 번째 도시", "네 번째 자연",
            "다섯 번째 동물", "여섯 번째 사물", "일곱 번째 길", "여덟 번째 하늘",
            "아홉 번째 바다", "열 번째 숲", "열한 번째 다리", "열두 번째 산",
            "열세 번째 강", "열네 번째 꽃", "열다섯 번째 나무", "열여섯 번째 호수"
        ];

        const itemCount = imageUrls.length;
        const radius = 900; // 원의 지름
        const angleStep = (2 * Math.PI) / itemCount;

        // ▼▼▼ 변경 사항 4. 이미지 아이템과 설명을 동적으로 생성 및 배치 ▼▼▼
        for (let i = 0; i < itemCount; i++) {
            // 1. 요소 생성
            const item = document.createElement('div');
            item.className = 'image-item';

            const description = document.createElement('span');
            description.className = 'description';
            description.textContent = descriptions[i]; // 설명 텍스트 설정

            item.appendChild(description); // 이미지 아이템에 설명 span 추가
            imageContainer.appendChild(item); // 컨테이너에 이미지 아이템 추가

            // 2. 스타일 및 위치 설정
            const thumbnailUrl = imageUrls[i].replace("/800/600", "/150/120");
            item.style.backgroundImage = `url('${thumbnailUrl}')`;
            
            const currentAngle = angleStep * i;
            const x = Math.cos(currentAngle) * radius;
            const y = Math.sin(currentAngle) * radius;
            const angleDeg = currentAngle * (180 / Math.PI);
            const rotationDeg = angleDeg + 90;
            item.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px) rotate(${rotationDeg}deg)`;
            item.style.left = '50%';
            item.style.top = '50%';
            item.style.zIndex = itemCount - i;

            // 3. 이벤트 리스너 추가
            item.addEventListener('click', () => {
                lightboxImage.src = imageUrls[i];
                lightbox.classList.remove('hidden');
            });
            
            item.addEventListener('mouseenter', () => {
                const highResImage = new Image();
                highResImage.src = imageUrls[i];
            }, { once: true });
        }

        lightbox.addEventListener('click', (e) => {
            if (e.target !== lightboxImage) { lightbox.classList.add('hidden'); }
        });
        
        scene.addEventListener('contextmenu', (e) => e.preventDefault());

        // --- 자연스러운 회전 로직 (기존과 동일) ---
        let isDragging = false, startX = 0, rotation = 0, startRotation = 0, lastX = 0, velocity = 0, animationFrameId;
        const friction = 0.95;
        function inertiaLoop() {
            rotation += velocity; velocity *= friction;
            imageContainer.style.transform = `rotate(${rotation}deg)`;
            if (Math.abs(velocity) > 0.1) { animationFrameId = requestAnimationFrame(inertiaLoop); }
        }
        scene.addEventListener('mousedown', (e) => {
            isDragging = true; cancelAnimationFrame(animationFrameId);
            startX = e.clientX; startRotation = rotation; lastX = startX; velocity = 0;
        });
        window.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const dx = e.clientX - startX; const sensitivity = 0.1; // 회전 시 민감도
            rotation = startRotation + dx * sensitivity;
            velocity = 0.8 * ((e.clientX - lastX) * sensitivity) + 0.2 * velocity;
            lastX = e.clientX; imageContainer.style.transform = `rotate(${rotation}deg)`;
        });
        window.addEventListener('mouseup', () => {
            if (!isDragging) return; isDragging = false; inertiaLoop();
        });
    </script>

</body>
</html>