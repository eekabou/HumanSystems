<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>document</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: #1a1a1a;
            color: #fff;
            text-align: center;
            padding-top: 50px;
            margin: 0;
            overflow: hidden;
        }

        h1 {
            color: #eee;
        }

        .scene {
            width: 700px;
            height: 700px;
            cursor: grab;
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translate(-50%, 80%); 
        }
        
        .scene:active {
            cursor: grabbing;
        }

        .image-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: 50% 50%;
        }
        
        .image-item {
            position: absolute;
            /* ▼▼▼ 변경 사항: 이미지 크기 100% 증가 ▼▼▼ */
            width: 175px;  /* 150px -> 300px */
            height: 240px; /* 120px -> 240px */
            border: 2px solid lightgreen;
            box-shadow: 0 0 10px lightseagreen;
            overflow: hidden;
            background-color: #222;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            user-select: none;
            -webkit-user-drag: none;
            cursor: pointer;
            transition: box-shadow 0.2s;
        }

        .description {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 4px 0;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            font-size: 13px;
            text-align: center;
            pointer-events: none;
        }


        #lightbox {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.85); display: flex;
            justify-content: center; align-items: center; z-index: 1000;
            opacity: 1; transition: opacity 0.4s ease; cursor: pointer;
        }

        #lightbox.hidden { opacity: 0; pointer-events: none; }
        
        #lightbox-image {
            max-width: 85vw; max-height: 85vh;
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.9); cursor: default; 
        }
    </style>
</head>
<body>

    <!-- <h1>클릭 & 드래그로 회전</h1>
    <p>이미지 클릭 시 해당 이미지만 강조 표시</p> -->

    <div class="scene">
        <div class="image-container">
        </div>
    </div>
    
    <div id="lightbox" class="hidden">
        <img id="lightbox-image" src="" alt="Zoomed Image">
    </div>

    <script>
        const scene = document.querySelector('.scene');
        const imageContainer = document.querySelector('.image-container');
        const lightbox = document.getElementById('lightbox');
        const lightboxImage = document.getElementById('lightbox-image');
        
        const imageUrls = [
            "images/중소기업_확인서.png", "images/중소기업_확인서.png",
            "images/중소기업_확인서.png", "images/중소기업_확인서.png",
            "images/중소기업_확인서.png", "images/중소기업_확인서.png",
            "images/중소기업_확인서.png", "images/중소기업_확인서.png",
            "images/중소기업_확인서.png", "images/중소기업_확인서.png",
            "images/중소기업_확인서.png", "images/중소기업_확인서.png",
            "images/중소기업_확인서.png", "images/중소기업_확인서.png",
            "images/중소기업_확인서.png", "images/중소기업_확인서.png",
            "images/중소기업_확인서.png", "images/중소기업_확인서.png",
        ];
        
        const descriptions = [
            "중소기업 확인서", "중소기업 확인서", "중소기업 확인서", "중소기업 확인서",
            "중소기업 확인서", "중소기업 확인서", "중소기업 확인서", "중소기업 확인서",
            "중소기업 확인서", "중소기업 확인서", "중소기업 확인서", "중소기업 확인서",
            "중소기업 확인서", "중소기업 확인서", "중소기업 확인서", "중소기업 확인서",
            "중소기업 확인서", "중소기업 확인서"
        ];

        const itemCount = imageUrls.length;
        const radius = 500;
        const angleStep = (2 * Math.PI) / itemCount;

        for (let i = 0; i < itemCount; i++) {
            const item = document.createElement('div');
            item.className = 'image-item';
            
            const description = document.createElement('span');
            description.className = 'description';
            description.textContent = descriptions[i];
            item.appendChild(description);

            imageContainer.appendChild(item);

            const thumbnailUrl = imageUrls[i].replace("/800/600", "/150/120");
            item.style.backgroundImage = `url('${thumbnailUrl}')`;
            
            const currentAngle = angleStep * i;
            const x = Math.cos(currentAngle) * radius;
            const y = Math.sin(currentAngle) * radius;
            const angleDeg = currentAngle * (180 / Math.PI);
            const rotationDeg = angleDeg + 90;
            
            item.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px) rotate(${rotationDeg}deg)`;
            
            item.style.left = '50%';
            item.style.top = '50%';
            item.style.zIndex = itemCount - i;

            item.addEventListener('click', () => {
                lightboxImage.src = imageUrls[i];
                lightbox.classList.remove('hidden');
            });
            
            item.addEventListener('mouseenter', () => {
                const highResImage = new Image();
                highResImage.src = imageUrls[i];
            }, { once: true });
        }

        lightbox.addEventListener('click', (e) => {
            if (e.target !== lightboxImage) { lightbox.classList.add('hidden'); }
        });
        
        window.addEventListener('keydown', (e) => {
            if (!lightbox.classList.contains('hidden') && e.key === 'Escape') {
                lightbox.classList.add('hidden');
            }
        });
        
        scene.addEventListener('contextmenu', (e) => e.preventDefault());

        let isDragging = false, startX = 0, rotation = 0, startRotation = 0, lastX = 0, velocity = 0, animationFrameId;
        const friction = 0.95;
        
        function inertiaLoop() {
            rotation += velocity; velocity *= friction;
            imageContainer.style.transform = `rotate(${rotation}deg)`;
            if (Math.abs(velocity) > 0.1) { animationFrameId = requestAnimationFrame(inertiaLoop); }
        }

        scene.addEventListener('mousedown', (e) => {
            isDragging = true; cancelAnimationFrame(animationFrameId);
            startX = e.clientX; startRotation = rotation; lastX = startX; velocity = 0;
        });

        window.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const dx = e.clientX - startX; 
            const sensitivity = 0.2;
            rotation = startRotation + dx * sensitivity;
            velocity = 0.8 * ((e.clientX - lastX) * sensitivity) + 0.2 * velocity;
            lastX = e.clientX; 
            imageContainer.style.transform = `rotate(${rotation}deg)`;
        });

        window.addEventListener('mouseup', () => {
            if (!isDragging) return; isDragging = false; inertiaLoop();
        });

    </script>

</body>
</html>